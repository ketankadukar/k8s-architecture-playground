<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Kubernetes Admission Controllers — In-Depth Blog</title>
<style>
  body { font-family: system-ui, sans-serif; background:#0e1116; color:#e6edf3; margin:0; }
  header { background:#161a22; padding:30px; border-bottom:2px solid #30363d; text-align:center; }
  h1,h2,h3 { color:#2f81f7; margin-bottom:10px; }
  p { color:#9da7b3; line-height:1.6; }
  .wrap { max-width:1000px; margin:auto; padding:20px; }
  .card { background:#121721; border:1px solid #2a3240; border-radius:12px; padding:20px; margin-bottom:20px; }
  .diagram { background:#0c1118; border:1px solid #2a3240; border-radius:12px; padding:20px; margin-bottom:20px; }
  .dot { width:12px; height:12px; border-radius:50%; display:inline-block; margin-right:6px; }
  .blue{background:#2f81f7;} .orange{background:#d29922;} .purple{background:#b392f0;}
  .controls { margin-top:10px; }
  button { background:#1f6feb; color:white; border:none; border-radius:8px; padding:8px 12px; margin-right:6px; cursor:pointer; }
  button.secondary { background:#0c1118; color:#e6edf3; border:1px solid #2a3240; }
  .timeline { display:flex; gap:6px; margin-top:10px; }
  .stepdot { width:14px; height:14px; border-radius:50%; background:#1b2330; border:1px solid #2a3240; }
  .stepdot.active { background:#2f81f7; }
  footer { background:#161a22; text-align:center; padding:20px; border-top:2px solid #30363d; color:#9da7b3; }
</style>
</head>
<body>
<header>
  <h1>Kubernetes Admission Controllers — In-Depth Guide</h1>
  <p>Understand how Kubernetes enforces policies and mutates requests with interactive diagrams and detailed notes.</p>
</header>

<main class="wrap">
  <!-- Intro -->
  <section class="card">
    <h2>Introduction</h2>
    <p>Admission controllers are plugins in the <span class="dot blue"></span>API Server that intercept requests <b>after authentication and authorization</b> but <b>before persistence in etcd</b>. They are critical for enforcing cluster policies, setting defaults, and rejecting invalid configurations. Without them, Kubernetes would lack guardrails for security, quotas, and resource management.</p>
  </section>

  <!-- Animated Diagram -->
  <section class="diagram">
    <h2>Request Flow Diagram</h2>
    <svg viewBox="0 0 800 200" width="100%" height="200">
      <defs>
        <marker id="arrow" markerWidth="10" markerHeight="10" refX="6" refY="3" orient="auto">
          <path d="M0,0 L0,6 L9,3 z" fill="#2f81f7"/>
        </marker>
      </defs>
      <circle cx="100" cy="100" r="20" fill="#2f81f7">
        <animate attributeName="r" values="20;25;20" dur="2s" repeatCount="indefinite"/>
      </circle>
      <text x="70" y="140" fill="#9da7b3">API Server</text>
      <line x1="120" y1="100" x2="250" y2="100" stroke="#2f81f7" stroke-width="2" marker-end="url(#arrow)">
        <animate attributeName="stroke-dasharray" values="0,200;200,0" dur="2s" repeatCount="indefinite"/>
      </line>
      <circle cx="280" cy="100" r="20" fill="#b392f0">
        <animate attributeName="r" values="20;25;20" dur="2s" repeatCount="indefinite"/>
      </circle>
      <text x="240" y="140" fill="#9da7b3">Admission</text>
      <line x1="300" y1="100" x2="430" y2="100" stroke="#2f81f7" stroke-width="2" marker-end="url(#arrow)">
        <animate attributeName="stroke-dasharray" values="0,200;200,0" dur="2s" repeatCount="indefinite"/>
      </line>
      <circle cx="460" cy="100" r="20" fill="#d29922">
        <animate attributeName="r" values="20;25;20" dur="2s" repeatCount="indefinite"/>
      </circle>
      <text x="440" y="140" fill="#9da7b3">etcd</text>
    </svg>
    <p>This motion diagram shows how requests flow through the API Server, admission controllers, and finally into etcd.</p>
  </section>

  <!-- Interactive lifecycle -->
  <section class="card">
    <h2>Admission Control Phases</h2>
    <p>Click through to see how a request flows:</p>
    <div class="controls">
      <button id="prev">◀ Prev</button>
      <button id="next">Next ▶</button>
      <button class="secondary" id="reset">Reset</button>
    </div>
    <div id="frame" style="margin-top:12px"></div>
    <div id="timeline" class="timeline"></div>
  </section>

  <!-- Types -->
  <section class="card">
    <h2>Types of Admission Controllers</h2>
    <p>Admission controllers can be <b>compiled-in plugins</b> or <b>dynamic webhooks</b>:</p>
    <ul>
      <li><span class="dot purple"></span><b>MutatingAdmissionWebhook:</b> External webhook that can modify objects before persistence.</li>
      <li><span class="dot purple"></span><b>ValidatingAdmissionWebhook:</b> External webhook that validates objects and can reject them.</li>
      <li><span class="dot purple"></span><b>ValidatingAdmissionPolicy:</b> Declarative validation using CEL expressions, no external service needed.</li>
      <li><span class="dot purple"></span><b>LimitRanger:</b> Enforces default resource requests and limits.</li>
      <li><span class="dot purple"></span><b>ResourceQuota:</b> Ensures namespace quotas are not exceeded.</li>
      <li><span class="dot purple"></span><b>PodSecurity:</b> Enforces Pod Security Standards (baseline, restricted).</li>
    </ul>
  </section>

  <!-- Configuration -->
  <section class="card">
    <h2>Configuring Admission Controllers</h2>
    <p>Cluster admins enable or disable plugins via API Server flags:</p>
    <pre style="background:#0c1118; padding:10px; border-radius:8px; overflow-x:auto;">
kube-apiserver --enable-admission-plugins=NamespaceLifecycle,LimitRanger,PodSecurity
kube-apiserver --disable-admission-plugins=AlwaysDeny,PodNodeSelector
    </pre>
    <p>Defaults include NamespaceLifecycle, LimitRanger, MutatingAdmissionWebhook, ResourceQuota, PodSecurity, and more.</p>
  </section>

  <!-- Notes -->
  <section class="card">
    <h2>Key Notes</h2>
    <ul>
      <li>Admission controllers only affect <b>write operations</b> (create, update, delete).</li>
      <li>They run <b>after authentication/authorization</b> but <b>before persistence</b>.</li>
      <li>Mutating controllers run first, then validating controllers.</li>
      <li>Dynamic admission (webhooks) allows custom policies beyond built-in plugins.</li>
    </ul>
  </section>
</main>

<footer>
  <p>Built for learning. Extend this blog with deeper dives into each plugin, examples, and configuration tips.</p>
</footer>

<script>
  const steps = [
    { title:"1) Request arrives", body:"A client sends a create/update/delete request. API Server authenticates and authorizes it." },
    { title:"2) Mutating admission", body:"Mutating controllers run first. They may add defaults, inject
